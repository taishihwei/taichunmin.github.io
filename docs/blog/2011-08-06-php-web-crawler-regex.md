---
title: "要對網頁使用 preg 之前，記得先去除換行!"
date: 2011-08-06T17:38:00+08
tags:
  - 動態網頁
  - 正則表達式處理網頁
  - PHP處理網頁
  - taichunmin
  - PHP
  - preg
  - 正則表達式
  - preg_match
  - preg_match_all
  - 換行
---
# 要對網頁使用 preg 之前，記得先去除換行!

在學到PHP裡面的preg之後，就一直很想用這個來抓出網頁中我想要的資料

(網頁是使用 `file_get_contents( 'http://........' );` 取得的)

可是不管怎麼嘗試

就是抓不出我想要的東西

我還曾經幾度懷疑我學的正則表達式是不是跟別人不一樣...

後來乾脆寫了一個測試的網頁

才真正發現了問題所在

原來PHP裡面的 `preg_match` 和 `preg_match_all` 不把換行( `\r\n` 和 `\n` )視為萬用字元 (.)

所以在下正則表達式時，就會遇上麻煩了...

所以我後來的解決辦法是

先使用 `str_replace(["\r\n","\n"], ["",""], $html);` 去除所有的換行

這樣就成功解決的這個奇怪的問題~
