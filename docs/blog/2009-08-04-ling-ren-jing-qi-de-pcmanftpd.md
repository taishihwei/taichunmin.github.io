---
title: 令人驚奇的PCManFTPD
date: 2009-08-04T20:51:00+08
tags:
  - 其他資料
---
# 令人驚奇的PCManFTPD

之前  
就已經驚嘆於  
appserv安裝的方便性  
可是  
沒想到  
PCManFTPD更神奇...  
下載完的壓所檔大小只有175kb  
而且還是免安裝軟體  
程式點兩下就自動執行了  
感覺超方便的  
底下是他的作者所寫的教學文章  
我就一字不漏的貼過來啦

##  ![Icon](http://pcman.ptt.cc/FTPD_teach/PCManFTPD.gif) PCMan 教你幾分鐘內學會架簡易個人 FTP 站，和好友分享檔案

使 用 PCMan's FTP Server 輕鬆快速架設 FTP 站        (初版：2004.05.08 / 修訂：2005.04.13)  
下文歡迎網友轉錄轉載，但是一律請註明原作者以及文章出處        作者：**國立陽明大學醫學系** **洪 任諭** 

- - -

### 千萬要給自己一個機會嘗試，相信我，這真的很簡單。

隨著電腦和網路的普及，對於一般個人來說，尤其是使用學術網路的學生，架設FTP站已經是很普遍的事情。再加上作業系統的進步，還有網路上各式各樣的軟 體，架設 FTP 站再也不是少數高手的專利。  
硬碟容量越來越大，資料越來越多，電腦裡滿滿的寶藏，要是能和大家分享該多好呢，但很多人不熟悉電腦操作，也不想花時間學習，因而卻步不前，這是很可惜 的，其實如果是在Windows系統下，這只需要短短幾分鐘時間就能學會。  
在Windows環境下，以前只有需要付費的少數外國軟體可以使用，不好操作又有一些中文不相容的問題，後來隨著軟體的發展，漸漸的各式軟體如雨後春筍般 出現，百家爭鳴，各有所長，其中有幾套還是免費軟體，品質都很不錯，但很可惜，英文的介面配上較為複雜的設定方式，對於電腦初學者來說還是一看就打退堂 鼓，會架 FTP 站的人相對還是少數，雖然其實很簡單，但因為大家都沒接觸過，所以會架站的人總不免有點得意，不會架的還得看人臉色拜託人家教，使用Serv-U等老牌軟 體架 FTP 站也成為某些社團必教的課程。  
其實，沒有那麼難，也不用花時間研究那些英文軟體怎麼用，我現在提供一個 Step by Step 的教學，按照以下步驟，在幾分鐘內一個不熟電腦的初學者都可以瞬間把個人 FTP 站架好。  

### 快速簡易 FTP 站架設全攻略，Step by Step 示範，一學就會：

首先下載要用來架設 FTP 站的軟體，這裡我推薦我設計的軟體 [PCMan's FTP Server (按這裡下載)](http://pcman.ptt.cc/PCManFTPD2.zip)，這是**專 門針對初學者設計**的**全中文免費 FTP 架站軟體**， 特色是讓不熟電腦的人也能夠輕易架設 FTP 站。  
具有繁體中文的操作介面，更是沒有許多外國知名軟體不支援中文檔名的問題，硬體需求很低，在硬體等級較差的電腦上一樣可以運作的非常順暢，執行快速，體積 輕巧，操作簡單，功能雖比較基本，但操作相當容易。安全性，傳輸速度和功能不是這個軟體的主要訴求，專為初學者一般用途設計，簡單的中文介面及相容 中文檔名，並且免費，才是本軟體的主要特色。我的目標，是希望做到即使不懂 FTP 的人也可以立即上手，輕鬆架設個人 FTP 站，和好友分享檔案。 這是zip壓縮檔，下載完畢請用解壓縮軟體解開到你要的位置，然後我們就可以開始架站了，解開後請執行 **PCManFTPD2.exe** 這個檔案，按照以下步驟操作一次你可以先大略試一下這軟體的操作方式。

1.  接下來應該會看到這個畫面，請從選單依圖示選擇 **\[設定使用者帳號\]**。 因為你不可能把電腦上的所有檔案毫無限制的放在網路上，公開給所有不認識的人下載，所以必須設定使用者，限定只有你開放的幾個特定使用者才能 連進來，此外還有要限制他們只能下載你有開放的內容，其他你不願分享出去的東西他們則是都不能碰。  
    ![啟動畫面](http://pcman.ptt.cc/FTPD_teach/step1.png)
2.  出現以下設定畫面後，請按下新增群組，為什麼要這樣操作我後面 會解說，總之先照著按。我把群組的帳號名稱設定為**"friend"**， 你也可以取成任何你 自己想要的名稱，請在密碼前面打勾表示要使用密碼，然後設定一個密碼，在這裡為了示範我設定**"1234"**， 事實上這是很不安全的密碼，請換成你自己想設的密碼。接著按下**\[設定檔案存取權限\]**  
    ![設定使用者](http://pcman.ptt.cc/FTPD_teach/step2.png)
3.   我們現在要來決定要開放哪些內容給使用者 下載。接下來會看到下面的畫面，在此檔案存取權限要設定的，就是我們要把哪些東西開放出去讓人(friend) 使用。設 定要開放的檔案相當簡單，只要在 \[Windows 檔案總管\] 當中找到你要開放分享的檔案或資料夾，用拖曳的方式丟進來即可。所以請先打開你的檔案總管。假設我要開放給別人抓的是「課業」、「軟體」、「醫學」這三個 資料夾裡面的資料，還有dxwebsetup.exe 這個檔案，我就用滑鼠在 \[檔案總管\] 選取這幾個 檔案，然後按住 \[左鍵\] 把他拖曳進 \[檔案存取權 限\] 設 定的對話框，放開即可。  
    ![檔案權限](http://pcman.ptt.cc/FTPD_teach/step3.png)
4.  拖曳完成之後就變成這樣，我剛拖進來的檔案都順利被檔案權限設 定對話框自動加入了。拖曳檔案是最簡單的設定方法，當然你也可以透過 \[加入資料夾\]、\[加 入檔 案\] 等按鈕來達到相同的目的。在這裡已經出現了類似檔案總管的介面，試試看展開左邊視窗的樹狀目錄，就像檔案總管一樣的瀏覽方式。設定好按下**\[確 定\]**即 可。  
    ![要分享的檔案已經設定好了](http://pcman.ptt.cc/FTPD_teach/step5.png)
5.  確定後回到使用者設定的畫面，剛剛我們已經新增了一個名為**"friend"**的**群 組**， 現在我要說明為什麼要新增群組。  
    因為你的 FTP 站可能不只一個使用者在用，你可能會同時開給很多不同的人，但如果你想開放給每個人的東西都一樣，既然如此那還為每個人都個別設定一次太麻煩了，**群組的用途，就是把一\[群\]使用者歸在同一\[組\]，讓他 們全組共用相同的設定，省去重複設定的麻煩**， 只要把新增加的使用者都指定為剛剛設定的"friend"群 組，就可以 直接全部套用群 組設定值，不必重複設定 (當然如果你是所有使用者都共用同一帳號的話，直接建立使用者即可，就不需要使用群組了)。請看以下操作：  
    按下**\[新 增使用者\]**按 鈕，並且將他命名為你想要的名字，這個名字將會用來當作 FTP 連線用的帳號，在這裡我只是示範，設使用者名為 **"pcman"**， 然後從**右 上方選擇群組**， 讓**新 增的"pcman"使用者套用剛剛的"friend"群組的設定**。 現 在使用者 "pcman" 已經屬於 "friend" 這個群組。請注意，**使 用者如 果沒有再設定密碼，則會使用群組的密碼**， 不想套用群組密碼請在使用者的 \[密 碼\] 前面空格打勾，並且輸入使用者自己專屬的密碼，如此 密碼就會是使用 者自己的密碼而非群組的密碼。底下的其他設定也是一樣，只要沒有另外再設都是直接套用群組的設定，設定完請按下確定，我們可以開始測試。  
    ![套用群組](http://pcman.ptt.cc/FTPD_teach/step6.png)
6.  用 FTP 連線軟體連線自己的電腦試試，底下示範用免費軟體 [FileZilla](http://filezilla.sourceforge.net/)， 你可以改用你慣用的軟體像是 CuteFTP...等。  
     IP 位址輸入 localhost， 這是 Windows 系統預設的位址，代表連線到自己的電腦。使用者名稱是剛剛設定的 "pcman"， 密碼沒另外幫使用者設，所以是套用 "friend" 群組的密碼 "1234"，連接埠沒有另外 設定的話**預 設是21**， 順利**連 線成功的話，恭喜你架站成功了**! 如果無法連線，那有可能表示你的連接埠 21 有其他軟體在用，發生衝突，請看本篇第 10 步驟，改連接埠號碼。看到右邊列出的檔案嗎？是不是剛才設定的幾個檔案都出現在你的 FTP 底下了？  
    無法連線或連線後無法列出檔案者請見下方[常 見問題疑難排解](http://pcman.ptt.cc/FTPD_teach/PCManFTPD_teach.html#%B1%60%A8%A3%B0%DD%C3D%BA%C3%C3%F8%B1%C6%B8%D1%A1G)。  
    ![測試](http://pcman.ptt.cc/FTPD_teach/step7.png)
7.  再進一步切入「軟體」資料夾當中，是不是讀到了？列出來的正是 資料夾裡面的檔案。  
    ![切換目錄成功](http://pcman.ptt.cc/FTPD_teach/step8.png)
8.  以上，一個最簡陋的站就架設完畢了，大家可以試著下載自己站上 的檔案看看，一切正常就大功告成。簡易 FTP 站到此架設完畢，可以邀請朋友來下載檔案了。要讓朋友連線進來，必須給他你的 IP 和你設定的 FTP 連接埠 (預設是21)，後面進階設定會講怎樣修改連接埠。不知道你電腦的 IP 或別人無法連線進來，你的 IP 就是 PCMan's FTP Server 主視窗上面顯示的那串 xxx.xxx.xxx.xxx 的數字。

### FTP 進階設定：

1.  進階選項，請到 \[檢 視\] / \[設定 Server\]，來調整一些進階設定  
    ![修改伺服器設定](http://pcman.ptt.cc/FTPD_teach/step9.png)
2.    
    雖然原本的 FTP 通常連接埠預設使用 21，但為了 安全起見，或是避免和系統提供的其他服務衝突，通常我們會改用其 他數字，所以到這裡修改，選擇設定 Server 後出現右側畫面，把**連 接埠改成你要的數字**即 可，我這邊改成 2100。  
    這裡大家看到一個陌生的名詞：PASV， 這是被動傳輸模 式。 一般的 FTP 在傳送資料時，採用主 動模式，由用戶端主 動要求伺服器，應該把資料傳到那個連接埠給它。問題是，這樣一 來，使用者可以任意要求伺服器到處連線各連接埠，這會有安全性問題，而且一旦 伺服器受防火牆阻擋，就無法連線出去傳送資料。因此在防火牆存 在下，應改用被動模式。 所謂的被動模式( PASV )，就是使用者連進 FTP 伺服器之後，不主動要 求伺服器，而是被動 的等 伺服器通知它可以連線 到哪裡去取得下載的資料。至於 FTP 伺服器會通知使用者可以連線到哪些連接埠呢？依照我們設定的連接埠範圍。我們允許伺服器使用 2048 ~ 2248 的連接埠，來接受使用者的被動連線。設定完連接埠範圍還要注意，這個範圍內的連接埠都不能被防火牆或防毒軟體擋住。  
    ![伺服器設定](http://pcman.ptt.cc/FTPD_teach/step10.png)
3.  再度使用檔案權限設定，請重新開啟使用者設定的畫面，選擇**"pcman"**使 用者並且按下 **\[設 定檔案權限\]**， 我們來幫"pcman"使用者更進一步**修改權限設定**， 隨便點選其中的檔案，有沒有注意到右下方的所有檔案操作選項都不能用了，只剩下 **\[繼承上層權限\]** 是打勾的？ 別忘了，剛剛我們根本沒幫使用者"pcman"做檔案權限設定，他是直接**" 繼承上層"群組 "friend" 的設定**。 使用群組時，只要不更動使用者設定，就會自動套用使用者所屬群組的設定，而當某個使用者所需要的設定和他所屬的群組 有點不同的時候，可以**取 消 \[繼承上層權限\]，並且額外設定使用者自己的權限。**  
    在這裡再示範一下進階操作，**資 料夾在站上顯示的位置，不一定要是真實存在電腦上的位置**， 從左邊任意選擇一個資料夾，再按下 **\[加 入資料夾\]** 的 按鈕，就可以把一個原本在 其他地方的資料夾，掛到你選取的資料夾下，例如我現在示範一下把「 C 磁碟機」掛在 「軟體」資料夾底下。  
    ![進階權限設定](http://pcman.ptt.cc/FTPD_teach/step11.png)
4.  我從左邊選擇「軟體」，然後按下 **\[加 入資料夾\]**， 選擇 C 磁碟，然後**\[確 定\]**， 注意到了嗎? C 磁碟現在被掛在 「軟體」資料夾底下，就好像他本來就是放在「軟體」下面的資料夾一樣。此外，不但可以把實際位置不在某資料夾下的檔案或資料夾掛進來，還可以建立虛擬資料 夾。虛擬資料夾就是在 FTP 站上可以在你指定的位置顯示出一個資料夾，你甚至可在裡面加入檔案，但是**實 際上在電腦上沒有這個資料 夾的存在**。 要使用虛擬資料夾請按 **\[加 入虛擬資料夾\]**， 輸入資料夾名稱即可。  
    ![掛載資料夾](http://pcman.ptt.cc/FTPD_teach/step12.png)
5.  進階功能：使用 IP 過濾，可以只允許特定位置的電腦連線 (例如只限於校內的同學連線)，或是禁止特定使用者連線，示範使用方式如下：  
    從主選單的 **\[檢視\] / \[設定 Server\]** 進 去，可以找到 **\[IP 過濾\]** 的 分頁如下圖。  
    ![IP 過濾](http://pcman.ptt.cc/FTPD_teach/step13.png)
6.  假設我現在只想允許和我一樣有住校的同學連線進來，我就可以輸 入屬於我們宿舍的 IP 如下圖：  
      
    
    ![IP 過濾](http://pcman.ptt.cc/FTPD_teach/step14.png)
    
    假 設住在我們這棟宿舍的同學，IP 都是 140.129.59 開頭的，那 IP 位址的第四個數字用星號代替，140.129.59.\* 就表示所有開頭為 140.129.59 的 IP 位址。  
    輸入 IP 位址後按下新增，如此你的 FTP 站就只允許所有 IP 位址開頭為 140.129.59 的使用者連線，其他地方是連不進來的。  
    要禁止特定 IP 連線也是一樣的方式設定。  
    如果沒有特別設定允許連線的 IP 位址，則除被禁止的 IP 以外，所有其他 IP 都可以連線。  
    不一定要使用星號來設定，星號只是為了一次代表大量同樣網域的 IP 比較方便，事實上也可以直接過濾像是 140.129.59.34 這樣的特定 IP 位址，而不用星號。  
    
7.  以上已經示範完大致上的功能，操作就和 Windows 系統一樣簡單，自己試驗一下幾分鐘之內就可以架好屬於自己的 FTP 站，剩下我沒講的部分都很簡單易懂一看就會用，自己多玩玩看就是了，祝每位看到這篇教學的使用者架站順利。

### 常見問題疑難排 解：

1.  為何按教學設定好之後，從 FTP 軟體無法連上 localhost，或外面的人無法連線進來？  
    請檢查作業系統及防毒軟體防火牆相關設定，是否擋住了 FTP 站使用的連接埠。或者系統上有其他使用同一連接埠的程式。(例如 Windows XP / 2000 )內建的 FTP 服務。此外可以試著更換連接埠看看能否使用。Windows XP 系統防火牆請到 \[控制台\] 找 到 \[網路連線\] 相關設定， 進入後在你使用的連線上按下\[右 鍵\]，選\[內容\]， 再找到\[進 階\]，即可找到。詳見 Windows 系統的說明文件，或網路上其他教學。防毒軟體設定部分，請參照各軟體使用說明，或網路上的教學，推薦 **[台 灣 FTP 聯盟 http://twftp.org/](http://twftp.org/)**。 此外，請記得檢查 該無法連線的使用者是不是不小心被 IP 過濾的功能檔掉了。
2.  為何可以連線，但是連上後無法列出檔案？  
    因為系統或防毒軟體的防火牆擋住了，使得資料無法傳送。請打開 PASV 模式，設定好沒有被防火牆擋住的 PASV 連接埠範圍，並且請對方改用 PASV 模式連線看看。這種問題通常都是連線雙方的防火牆、或是防毒軟體設定不當造成，非本軟體設計錯誤，請妥善設定系統，勿來信回報錯誤。
3.  動態 IP、虛擬  IP 架站、或其他教學，建議請到 **[台 灣 FTP 聯盟 http://twftp.org/](http://twftp.org/)**， 有豐富參考資料，請勿直接來信軟體作者詢問，因為相關問 題我並不清楚。

### 版權聲明：

*   本文由陽明大學醫學系洪任諭撰寫 Copyright © 2005
*   PCMan's FTP Server 為洪任諭 (亦即本文作者) 所製作之軟體 <http://pcman.ptt.cc/>
*   本文最上方及 PCMan's FTP Server 軟體內所用圖示為師大美術系林彥慧繪製
*   CuteFTP® 為 GlobalScape® 公司的產品及註冊商標
*   Filezilla 為 <http://fillezilla.sourceforge.net/> Filezilla 開放原始碼專案的產品
*   Windows® 為 Microsoft® 公司的產品及註冊商標
