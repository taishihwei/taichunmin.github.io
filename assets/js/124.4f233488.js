(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{500:function(t,e,s){"use strict";s.r(e);var a=s(8),i=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"line-simple-beacon-for-esp32-gong-zuo-fang-windows-10"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#line-simple-beacon-for-esp32-gong-zuo-fang-windows-10"}},[t._v("#")]),t._v(" LINE Simple Beacon for ESP32 工作坊 (Windows 10)")]),t._v(" "),s("p",[t._v("作者：戴均民 "),s("a",{attrs:{href:"https://github.com/taichunmin",target:"_blank",rel:"noopener noreferrer"}},[t._v("(taichunmin)"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[t._v("投影片："),s("a",{attrs:{href:"https://hackmd.io/@taichunmin/chatbot-tw-202002",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hackmd.io/@taichunmin/chatbot-tw-202002"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("共筆："),s("a",{attrs:{href:"https://hackmd.io/@chatbot-tw/chatbots-taichung-007",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hackmd.io/@chatbot-tw/chatbots-taichung-007"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"shi-qian-zhun-bei"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shi-qian-zhun-bei"}},[t._v("#")]),t._v(" 事前準備")]),t._v(" "),s("ul",[s("li",[t._v("Arduino IDE "),s("a",{attrs:{href:"https://www.arduino.cc/en/main/software",target:"_blank",rel:"noopener noreferrer"}},[t._v("(下載連結)"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("ESP32-DevKitC 開發板 "),s("a",{attrs:{href:"https://item.taobao.com/item.htm?id=542143157571",target:"_blank",rel:"noopener noreferrer"}},[t._v("(淘寶購買連結)"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Micro USB to USB 連接線")]),t._v(" "),s("li",[t._v("在 LINE Developers console 建立 Message API 頻道 "),s("a",{attrs:{href:"https://developers.line.biz/zh-hant/docs/messaging-api/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[t._v("(教學連結)"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"she-ding-message-api-de-webhook"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#she-ding-message-api-de-webhook"}},[t._v("#")]),t._v(" 設定 Message API 的 Webhook")]),t._v(" "),s("p",[t._v("為了讓這次工作坊進行的更加順利，我寫了一個 Webhook 提供給大家在這次工作坊中使用，當然在實際使用的時候，你會需要根據自己的需求自己開發 Webhook。")]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("如果要使用我所提供的 Webhook，所以請記得建立一個不重要的 Message API 頻道以避免 Access Token 洩漏喔！")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("建立 Message API 頻道："),s("a",{attrs:{href:"https://developers.line.biz/zh-hant/docs/messaging-api/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developers.line.biz/zh-hant/docs/messaging-api/getting-started/"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("當你建立一個 Message API 的頻道後，你需要前往 LINE Develpers console 把他設定成聊天機器人模式。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("LINE Develpers console：https://developers.line.biz/console/")])]),t._v(" "),s("p",[t._v("然後去該頻道的設定頁面，選取 Message API 分頁：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/zgMcBPW.png",alt:""}})]),t._v(" "),s("p",[t._v("在頁面中找到「Channel access token (long-lived)」的部份，並把 Access Token 複製下來。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/2oFkbCW.png",alt:""}})]),t._v(" "),s("p",[t._v("如果你的「Channel access token (long-lived)」中沒有 Access Token，你可以點選「Issue」建立一個。")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("「Time until current token becomes invalid」的下拉選單保持 "),s("code",[t._v("0")]),t._v(" 就可以了。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/L3l9Lz9.png",alt:""}})]),t._v(" "),s("p",[t._v("在頁面中找到「Webhook settings」的部份，然後把 "),s("code",[t._v("https://us-central1-taichunmin.cloudfunctions.net/gcf-line-devbot/[access_token]")]),t._v(" 填到 Webhook URL 中，並請確認底下的「Use webhook」也是啟用的狀態。")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("請將上面的 "),s("code",[t._v("[access_token]")]),t._v(" 替換成自己 Message API 的 Access Token！")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/vOMMe3l.png",alt:""}})]),t._v(" "),s("p",[t._v("最後可以按下「Verify」按鈕確認是否設定成功。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/GsKaZJu.png",alt:""}})]),t._v(" "),s("p",[t._v("若是設定成功，應該會顯示成功的訊息。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/RRmlFBB.png",alt:""}})]),t._v(" "),s("p",[t._v("接下來打開自己的 LINE，掃描 QR Code 把這個 Message API 頻道加為好友。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/Ieb2GRX.png",alt:""}})]),t._v(" "),s("p",[t._v("然後輸入「test」確認 Webhook 設定成功。")]),t._v(" "),s("img",{staticStyle:{width:"480px"},attrs:{src:"https://i.imgur.com/gNmI2kH.jpg"}}),t._v(" "),s("blockquote",[s("ol",[s("li",[t._v("我提供的 Webhook 是放在 Google Cloud Function 上面，原始碼："),s("a",{attrs:{href:"https://github.com/taichunmin/gcf-line-devbot",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/taichunmin/gcf-line-devbot"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("以上的 Access Token 均已在截圖後更換")])])]),t._v(" "),s("h2",{attrs:{id:"zai-arduino-ide-zhong-an-zhuang-esp32-kai-fa-ban"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zai-arduino-ide-zhong-an-zhuang-esp32-kai-fa-ban"}},[t._v("#")]),t._v(" 在 Arduino IDE 中安裝 ESP32 開發板")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("請先確定 Arduino IDE 已經安裝，並且先不要連接 ESP32 開發板。")])]),t._v(" "),s("p",[t._v("打開 Arduino IDE。然後從工具列點選的「檔案」🡲「偏好設定」打開偏好設定。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/bWc4E0S.png",alt:""}})]),t._v(" "),s("p",[t._v("找到偏好設定裡面的「額外的開發板管理員網址」，將 "),s("code",[t._v("https://dl.espressif.com/dl/package_esp32_index.json")]),t._v(" 填寫到輸入框中。接著，按下偏好設定裡面的「確定」儲存設定。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/Nu6yldY.png",alt:""}})]),t._v(" "),s("p",[t._v("從工具列點選「工具」🡲「開發板: xxx」🡲「開發板管理員」。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/MhVbkTo.png",alt:""}})]),t._v(" "),s("p",[t._v("在開發板管理員中的搜尋框輸入 "),s("code",[t._v("esp32")]),t._v(" 並且安裝「esp32」的最新版本。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/mnNxhzG.png",alt:""}})]),t._v(" "),s("p",[t._v("安裝後，應該要顯示為「INSTALLED」。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/JELlSnB.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"an-zhuang-esp32-qu-dong-cheng-shi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#an-zhuang-esp32-qu-dong-cheng-shi"}},[t._v("#")]),t._v(" 安裝 ESP32 驅動程式")]),t._v(" "),s("p",[t._v("為了要讓電腦能夠識別我們的 ESP32 開發板，我們需要安裝 ESP32 開發板的驅動程式。請選擇跟你作業系統相符的驅動程式下載並安裝（在本教學中是 "),s("code",[t._v("Windows 10")]),t._v("）。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("驅動程式連結："),s("a",{attrs:{href:"https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/B52E4mI.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"ce-shi-shang-chuan-cheng-shi-dao-esp32-kai-fa-ban-shang-mian"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ce-shi-shang-chuan-cheng-shi-dao-esp32-kai-fa-ban-shang-mian"}},[t._v("#")]),t._v(" 測試上傳程式到 ESP32 開發板上面")]),t._v(" "),s("p",[t._v("開啟 Arduino IDE，然後開啟一個新的專案。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/7NnciK1.png",alt:""}})]),t._v(" "),s("p",[t._v("將 ESP32-DevKitC 開發板使用 Micro USB to USB 連接線連接至你的電腦上。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/14nWwsV.jpg",alt:""}})]),t._v(" "),s("p",[t._v("從工具列點選「工具」🡲「開發板: xxx」🡲「ESP32 Dev Module」。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/IRjmHH4.png",alt:""}})]),t._v(" "),s("p",[t._v("從左下角系統工具列「微軟圖示」點選右鍵，然後選取「裝置管理員」。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/MBJeS2r.png",alt:""}})]),t._v(" "),s("p",[t._v("從裝置管理員中找到「連接埠 (COM 和 LPT)」🡲「Silicon Labs CP210x USB to UART Bridge」，並記下後面的 "),s("code",[t._v("(COM ?)")]),t._v("（在本教學中是 "),s("code",[t._v("COM5")]),t._v("）。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/4CsG3Vk.png",alt:""}})]),t._v(" "),s("p",[t._v("從工具列點選「工具」🡲「序列埠」🡲「COM ?」（在本教學中是 "),s("code",[t._v("COM5")]),t._v("）。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/mKIPReJ.png",alt:""}})]),t._v(" "),s("p",[t._v("確認 Arduino IDE 的右下角顯示成「ESP32 Dev Module 於 COM?」（在本教學中是 "),s("code",[t._v("COM5")]),t._v("），然後按下左上角的「上傳」按鈕測試是否設定正確。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/lTt7vaW.png",alt:""}})]),t._v(" "),s("p",[t._v("按下「上傳」按鈕後，會先進行程式碼編譯的過程，能夠在底下看到「草稿碼編譯中…」。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/s8socdh.png",alt:""}})]),t._v(" "),s("p",[t._v("編譯完成以後，就會開始上傳程式。除了狀態列會顯示上傳中，底下的黑底白字視窗中會顯示一些上傳的詳細紀錄：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/3nuUACq.png",alt:""}})]),t._v(" "),s("p",[t._v("當成功上傳以後，應該就會在底下黑底白字的區域中看到文字「Hard resetting via RTS pin...」，代表它已經幫你把 ESP32 重新開機了。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/WHTEnkf.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"shen-qing-yi-ge-line-simple-beacon-hardware-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shen-qing-yi-ge-line-simple-beacon-hardware-id"}},[t._v("#")]),t._v(" 申請一個 LINE Simple Beacon Hardware ID")]),t._v(" "),s("p",[t._v("LINE Simple Beacon Hardware ID，簡稱「硬體 ID」，是 LINE 為了識別這個 LINE Simple Beacon 是屬於哪個 Message API 所需要的唯一 ID，一個 Message API 最多可以申請 10 組。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("申請網址："),s("a",{attrs:{href:"https://manager.line.biz/beacon/register",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://manager.line.biz/beacon/register"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("前往申請網址以後，你會看到的畫面如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/AIy0CNB.png",alt:""}})]),t._v(" "),s("p",[t._v("登入之後，請點選「發行 LINE Simple Beacon 的硬體。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/lVq5c8T.png",alt:""}})]),t._v(" "),s("p",[t._v("然後你會看到你所有的 Message API 清單，請選擇你想要發行的那個頻道。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/MEbHN9K.png",alt:""}})]),t._v(" "),s("p",[t._v("點選「發行硬體 ID」來建立一個新的硬體 ID。")]),t._v(" "),s("blockquote",[s("p",[t._v("由於我這個頻道已經發行過了，所以下面的截圖中已經有一個硬體 ID 了。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/iEPgLyV.png",alt:""}})]),t._v(" "),s("p",[t._v("這個硬體 ID 的網頁先不要關閉，接下來會用到。")]),t._v(" "),s("h2",{attrs:{id:"ba-line-simple-beacon-shao-dao-esp32-nei"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ba-line-simple-beacon-shao-dao-esp32-nei"}},[t._v("#")]),t._v(" 把 LINE Simple Beacon 燒到 ESP32 內")]),t._v(" "),s("p",[t._v("首先，你要授權你手機上的 LINE 接收 Beacon 訊號。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("請用手機開啟這個連結："),s("a",{attrs:{href:"line://nv/settings/privacy/provideUsageData/beacon"}},[t._v("line://nv/settings/privacy/provideUsageData/beacon")])])]),t._v(" "),s("p",[t._v("接下來你要去複製 LINE Simple Beacon for ESP32 的程式碼。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("程式碼網址："),s("a",{attrs:{href:"https://github.com/taichunmin/line-simplebeacon-esp32/blob/master/sample/sample.ino",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/taichunmin/line-simplebeacon-esp32/blob/master/sample/sample.ino"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("然後先把 Arduino IDE 內原本的程式碼刪除後，把新程式碼貼上。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/W3ser8X.png",alt:""}})]),t._v(" "),s("p",[t._v("接著請把第一行的「HWID」右邊的 "),s("code",[t._v("0000000000")]),t._v(" 換成你上面取得的硬體 ID。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/G4Svuls.png",alt:""}})]),t._v(" "),s("p",[t._v("接下來只要按下上傳，並等候「Hard resetting via RTS pin...」的文字出現，就代表上傳成功囉！")]),t._v(" "),s("blockquote",[s("p",[t._v("如果對這個程式的除錯訊息有興趣的話，可以在上傳的時候，點選右上很像放大鏡的那個按鈕來開啟「序列埠監控視窗」，並且在右下角選擇「115200 band」，就能看到除錯訊息囉！")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/nAehguh.png",alt:""}})])]),t._v(" "),s("p",[t._v("如果您的手機收到以下的訊息，恭喜你已經成功完成這個工作坊啦！")]),t._v(" "),s("img",{staticStyle:{width:"480px"},attrs:{src:"https://i.imgur.com/gD34XhQ.jpg"}}),t._v(" "),s("h2",{attrs:{id:"can-kao-zi-liao"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#can-kao-zi-liao"}},[t._v("#")]),t._v(" 參考資料")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://hackmd.io/@taichunmin/chatbot-tw-202002",target:"_blank",rel:"noopener noreferrer"}},[t._v("本議程投影片"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/line/line-simple-beacon",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub: line/line-simple-beacon"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/taichunmin/line-simplebeacon-esp32",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub: taichunmin/line-simplebeacon-esp32"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.slideshare.net/jarsing/line-beacon-220894171",target:"_blank",rel:"noopener noreferrer"}},[t._v("LINE Beacon，數位導覽的小幫手！(@陳佳新)"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.slideshare.net/linecorp/line-simple-beaconbotsimple",target:"_blank",rel:"noopener noreferrer"}},[t._v("LINE Simple Beacon，讓你的 bot 不 Simple (@Hazel)"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://stringpiggy.hpd.io/mac-line-simple-beacon/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mac 也能當 LINE Beacon！"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://ithelp.ithome.com.tw/articles/10209703",target:"_blank",rel:"noopener noreferrer"}},[t._v("Line Beacon 實作 (Python/Golang)"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.evanlin.com/til-nodejs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("玩玩看 LINE Beacon (NodeJS/Golang)"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=i.exports}}]);