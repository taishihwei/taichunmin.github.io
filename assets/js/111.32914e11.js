(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{487:function(t,e,a){"use strict";a.r(e);var r=a(8),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"fu-zhu-kai-fa-line-flex-xun-xi-de-gong-ju"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fu-zhu-kai-fa-line-flex-xun-xi-de-gong-ju"}},[t._v("#")]),t._v(" 輔助開發 LINE Flex 訊息的工具")]),t._v(" "),a("p",[t._v("在開發 LINE Flex 訊息的時候，透過官方 "),a("a",{attrs:{href:"https://developers.line.biz/flex-simulator/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Flex Message Simulator"),a("OutboundLink")],1),t._v(" 看到的結果，不一定跟手機上面顯示的相同，如果你想要在手機上面看到顯示結果，你可以考慮使用本文要分享的小工具喔！")]),t._v(" "),a("p",[t._v("本文會教你建立一個聊天機器人，只要你使用桌面版的 LINE 對它送出 JSON 字串，它就會嘗試使用 replyMessage 把資料送出，你就可以在手機版 iOS 和 Android 的 LINE 上面看到顯示結果！")]),t._v(" "),a("p",[t._v("廢話不多說，馬上試用看看吧！")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://line.me/R/ti/p/%40736cebrk",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://i.imgur.com/gLaoyur.png",alt:""}}),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("由於後端採用 Google Cloud Function，為了避免用量過高被收錢，所以有鎖執行上限，如果無回應的話，可以考慮建立自己專用的機器人或是重新傳送訊息試試喔！")])]),t._v(" "),a("h2",{attrs:{id:"zhi-jie-ba-message-hui-chuan"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zhi-jie-ba-message-hui-chuan"}},[t._v("#")]),t._v(" 直接把 Message 回傳")]),t._v(" "),a("p",[t._v("加入聊天機器人好友後，請傳送以下的訊息：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello world"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("然後機器人應該就會直接回應一個純文字訊息：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/UhMp3bW.png",alt:""}})]),t._v(" "),a("p",[t._v("同時你也可以在手機中看到結果：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("Android")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("iOS")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:"https://i.imgur.com/pCQy2Jd.jpg",alt:""}})]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:"https://i.imgur.com/m0mf4mR.png",alt:""}})])])])]),t._v(" "),a("p",[t._v("接下來我們來測試直接從 "),a("a",{attrs:{href:"https://developers.line.biz/flex-simulator/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Flex Message Simulator"),a("OutboundLink")],1),t._v(" 複製下來的輸出：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("Android")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("iOS")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:"https://i.imgur.com/qggoRYv.jpg",alt:""}})]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:"https://i.imgur.com/1YK41xj.png",alt:""}})])])])]),t._v(" "),a("h2",{attrs:{id:"xian-shi-shou-dao-de-event"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xian-shi-shou-dao-de-event"}},[t._v("#")]),t._v(" 顯示收到的 Event")]),t._v(" "),a("p",[t._v("如果你對它傳送其他內容，它就會把 Event 用 JSON 回傳喔！")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/uSuzESF.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"yuan-shi-ma"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yuan-shi-ma"}},[t._v("#")]),t._v(" 原始碼")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/taichunmin/gcf-line-devbot",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/taichunmin/gcf-line-devbot"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("為了要節省後端伺服器的費用，所以這個聊天機器人是直接放在 Google Cloud Function 上面的，如果大家想要自己依樣畫葫蘆建立一個自己使用的機器人，你可以把這個原始碼的 "),a("code",[t._v("index.js")]),t._v(" 和 "),a("code",[t._v("package.json")]),t._v(" 放到 Cloud Function 上面就行囉！")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("2")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:"https://i.imgur.com/YO1cXYP.jpg",alt:""}})]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:"https://i.imgur.com/HXTyozq.png",alt:""}})])])])]),t._v(" "),a("p",[t._v("把程式放到 Cloud Function 上面以後，它就會給你一個 HTTPS 的網址，你就要去 LINE Developer Console 裡面把這個網址設定到 Webhook：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/jvDanyQ.png",alt:""}})]),t._v(" "),a("p",[t._v("記得要在 webhook 後面加上自己機器人的 Access Token 喔！")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/1Rld5iD.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"hou-ji"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hou-ji"}},[t._v("#")]),t._v(" 後記")]),t._v(" "),a("p",[t._v("這是受到"),a("a",{attrs:{href:"https://medium.com/@EtrexKuo",target:"_blank",rel:"noopener noreferrer"}},[t._v("卡米哥"),a("OutboundLink")],1),t._v("啟發而寫出來的工具，至於為什麼需要特別查看每個平台的顯示結果呢？因為有時候你會發現顯示出來的內容會有差異：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/081PCxy.png",alt:""}})]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("Android")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("iOS")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:"https://i.imgur.com/IL4NbGe.jpg",alt:""}})]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:"https://i.imgur.com/t9Aeh2n.png",alt:""}})])])])]),t._v(" "),a("p",[t._v("有發現哪裡不太對勁嗎？大家來找碴吧！")]),t._v(" "),a("h2",{attrs:{id:"xiang-guan-lian-jie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xiang-guan-lian-jie"}},[t._v("#")]),t._v(" 相關連結")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("本文範例程式的原始碼授權為 MIT License。")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://youtu.be/PuGOObhI5oA?t=560",target:"_blank",rel:"noopener noreferrer"}},[t._v("2020/05 在台中 chatbot.tw 分享的錄影檔"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=s.exports}}]);